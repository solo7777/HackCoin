const hre = require("hardhat");

// Temporary change to update commit history

async function main() {
    const daoAddress = "0xA3A50E5327CfeD5118d43c7cE57Bb69176eb5965";
    const dao = await hre.ethers.getContractAt("DAO", daoAddress);
    const txHash = "0x4cd618231421eb58ef44f354d78f9467a0809f01c26a4717cc84eafba6038f75";
    const receipt = await hre.ethers.provider.getTransactionReceipt(txHash);
    const proposalCreatedEvent = receipt.logs.find(
        log => log.topics[0] === hre.ethers.id("ProposalCreated(uint256,address,address[],uint256[],string[],bytes[],uint256,uint256,string)")
    );
    if (!proposalCreatedEvent) {
        throw new Error("ProposalCreated event not found");
    }
    const decodedEvent = dao.interface.parseLog(proposalCreatedEvent);
    const proposalId = decodedEvent.args.proposalId;
    console.log("Proposal ID:", proposalId.toString());
}

main().catch((error) => {
    console.error("Error:", error);
    process.exitCode = 1;
});